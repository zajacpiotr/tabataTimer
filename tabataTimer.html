<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>

<body>
    <button class="redSecWBtn" type="button">&lt;&lt;</button><input class="timerW" type="number" value="20"><button class="addSecWBtn" type="button">&gt;&gt;</button>
    <button class="redSecRBtn" type="button">&lt;&lt;</button><input class="timerR" type="number" value="10"><button class="addSecRBtn" type="button">&gt;&gt;</button>
    <button class="startApp" type="button">Start</button>
    <div id="testBox"></div>
    <div id="box"> </div>
    <br>
    <div id="boxTimerAll"></div>

    <script>
        var secondsAll = 0;
        var redSecWBtn = document.querySelector(".redSecWBtn");
        redSecWBtn.addEventListener("click", function() {
            var input = document.querySelector(".timerW");
            input.value--;
        }, false)
        var addSecWBtn = document.querySelector(".addSecWBtn");
        addSecWBtn.addEventListener("click", function() {
            var input = document.querySelector(".timerW");
            input.value++;
        }, false)
        var redSecRBtn = document.querySelector(".redSecRBtn");
        redSecRBtn.addEventListener("click", function() {
            var input = document.querySelector(".timerR");
            input.value--;
        }, false)
        var addSecRBtn = document.querySelector(".addSecRBtn");
        addSecRBtn.addEventListener("click", function() {
            var input = document.querySelector(".timerR");
            input.value++;
        }, false)
        var startApp = document.querySelector(".startApp"); //button which starting this application
        startApp.addEventListener("click", function() {
            var inputW = document.querySelector(".timerW");
            var secondsW = inputW.value;
            var inputR = document.querySelector(".timerR"); //in future i must change this, make a inputs a global
            var secondsR = inputR.value;
            secondsW++;
            secondsR++;
            var secondsAll = 240;
            var secondsPrep = 6;

            function counterPrep() {
                var showS = document.getElementById("box");
                secondsPrep--;
                showS.innerHTML = String(secondsPrep);
                if (secondsPrep > 0) {
                    setTimeout(counterPrep, 1000);
                } else {
                    counterAll();
                    counterW();
                }
            }
            counterPrep();

            function counterAll() {
                var showAll = document.getElementById("boxTimerAll");
                secondsAll--;
                showAll.innerHTML = String(secondsAll);
                if (secondsAll > 0) {
                    setTimeout(counterAll, 1000);
                }
            }


            function counterW() { //function who count seconds to 0 at workout time
                var showS = document.getElementById("box");
                secondsW--;
                showS.innerHTML = String(secondsW); //+ " " + secondsAll;
                if (secondsW > 0) {
                    setTimeout(counterW, 1000);
                } else {
                    if (secondsAll <= 0) {
                        showS.innerHTML = "Koniec";
                    } else {
                        counterR(); // after workout time initiate a rest function
                        secondsW = inputW.value;
                        secondsW++;
                    }
                }
            }


            function counterR() { //function who count seconds to 0 at rest time
                var showS = document.getElementById("box");
                secondsR--;
                showS.innerHTML = String(secondsR); //+ " " + secondsAll;
                if (secondsR > 0) {
                    setTimeout(counterR, 1000);
                } else {
                    if (secondsAll <= 0) {
                        showS.innerHTML = "Koniec";
                    } else {
                        counterW();
                        secondsR = inputR.value;
                        secondsR++;
                    }
                }
            }

        }, false)

    </script>
</body>

</html>
